<!DOCTYPE html>
<html lang="en-AU">
<head>
  <meta charset="UTF-8" />
  <title>PDF to TXT Converter | NutriThrive Quick Tools</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="description" content="Free PDF to TXT converter. Drag in a PDF, extract clean text instantly, download or email it, then explore Australia’s favourite focus foods." />
  <style>
    :root {
      --seafoam: #B4DEBD;
      --mist: #91C4C3;
      --deep: #80A1BA;
      --bg: var(--seafoam);
      --panel: color-mix(in srgb, var(--seafoam) 70%, #ffffff);
      --accent: var(--deep);
      --accent-dark: var(--mist);
      --ink: #203338;
      --muted: #3f5860;
    }

    * { box-sizing: border-box; }

    body {
      margin: 0;
      font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
      background-color: var(--bg);
      color: var(--ink);
      min-height: 100vh;
    }

    a { color: var(--accent-dark); }

    .page {
      max-width: 1200px;
      margin: 0 auto;
      padding: 40px 20px 80px;
    }

    header { text-align: center; margin-bottom: 32px; }

    h1 { margin: 0; font-size: clamp(2rem, 4vw, 3rem); letter-spacing: -0.02em; }

    .subtitle {
      max-width: 640px;
      margin: 12px auto 0;
      line-height: 1.6;
      color: var(--muted);
    }

    .layout {
      display: grid;
      grid-template-columns: minmax(0, 0.9fr) minmax(0, 1.1fr);
      gap: 24px;
    }

    @media (max-width: 900px) {
      .layout { grid-template-columns: 1fr; }
    }

    .panel {
      background: var(--panel);
      border: 2px solid var(--accent);
      border-radius: 22px;
      padding: 28px;
      display: flex;
      flex-direction: column;
      gap: 16px;
    }

    .section-title {
      margin: 0;
      font-size: 0.82rem;
      text-transform: uppercase;
      letter-spacing: 0.14em;
      color: var(--muted);
    }

    .drop-zone {
      border: 2px dashed var(--accent);
      border-radius: 18px;
      padding: 36px;
      text-align: center;
      background: #fff;
      color: var(--muted);
      cursor: pointer;
      transition: border-color 0.2s ease, background 0.2s ease;
    }

    .drop-zone.dragover {
      border-color: var(--accent-dark);
      background: color-mix(in srgb, var(--mist) 30%, #ffffff);
    }

    .btn-row { display: flex; gap: 10px; flex-wrap: wrap; }

    .btn {
      border-radius: 14px;
      padding: 11px 20px;
      font-size: 1rem;
      font-weight: 600;
      cursor: pointer;
      border: 2px solid var(--accent);
      background: transparent;
      color: var(--ink);
    }

    .btn.accent {
      background: var(--accent);
      border-color: var(--accent);
      color: #fff;
    }

    .btn:disabled { opacity: 0.4; cursor: not-allowed; }

    .status { color: var(--muted); font-size: 0.95rem; }

    .results {
      display: none;
      flex-direction: column;
      gap: 14px;
    }

    textarea {
      width: 100%;
      min-height: 260px;
      border-radius: 16px;
      border: 2px solid var(--accent);
      padding: 16px;
      background: #fff;
      color: var(--ink);
      font-family: 'JetBrains Mono', 'SFMono-Regular', Consolas, monospace;
    }

    .email-box { display: flex; gap: 10px; flex-wrap: wrap; }

    .email-box input {
      flex: 1;
      border-radius: 12px;
      border: 2px solid var(--accent);
      padding: 10px 14px;
      background: #fff;
      color: var(--ink);
    }

    .cta-card {
      border: 2px solid var(--accent);
      border-radius: 18px;
      background: color-mix(in srgb, var(--mist) 20%, #ffffff);
      padding: 18px;
      color: var(--ink);
    }

    .cta-links { display: flex; flex-wrap: wrap; gap: 10px; margin-top: 10px; }

    .cta-links a {
      border-radius: 999px;
      padding: 8px 14px;
      border: 2px solid var(--accent);
      background: var(--accent);
      color: #fff;
      text-decoration: none;
      font-weight: 600;
    }

    footer {
      margin-top: 40px;
      text-align: center;
      color: var(--muted);
      font-size: 0.85rem;
    }
  </style></style></style>
  <script src="pdf.min.js"></script>
  <script src="pdf.worker.min.js" type="text/javascript"></script>
  <script src="jspdf.umd.min.js"></script>
  <script>
    if (window.pdfjsLib) {
      pdfjsLib.GlobalWorkerOptions.workerSrc = 'pdf.worker.min.js';
    }
  </script>
</head>
<body>
  <div class="page">
    <header>
      <h1>PDF → TXT Converter</h1>
      <p class="subtitle">Drop a PDF, extract clean text instantly, then keep the focus going with Australia’s favourite superfoods.</p>
    </header>
    <div class="layout">
      
      <section class="panel">
        <p class="section-title">Upload your PDF</p>
        <div class="drop-zone" id="dropZone">
          <p><strong>Drop your PDF anywhere here</strong></p>
          <p>or click to browse your device</p>
          <small>Max ~25 MB • Text-based PDFs work best</small>
        </div>
        <input type="file" id="fileInput" accept="application/pdf" style="display:none" />
        <div class="btn-row">
          <button class="btn outline" id="sampleBtn">Load demo PDF</button>
          <button class="btn accent" id="convertBtn" disabled>Convert to TXT</button>
        </div>
        <div class="status" id="statusText" aria-live="polite">No file selected.</div>
      </section>
      <section class="panel">
        <p class="section-title">Download & share</p>
        <div class="results" id="resultsBlock">
          <textarea id="textOutput" spellcheck="false"></textarea>
          <div class="btn-row">
            <button class="btn accent" id="downloadBtn">Download TXT</button>
            <button class="btn outline" id="copyBtn">Copy text</button>
          </div>
          <label for="emailInput" style="font-weight:600;">Email it to yourself (optional)</label>
          <div class="email-box">
            <input type="email" id="emailInput" placeholder="you@example.com" />
            <button class="btn accent" id="emailBtn">Email me</button>
          </div>
          <small style="color:var(--muted);">We’ll open your email app with the text already pasted.</small>
        </div>
        <div class="cta-card">
          <h3>Stay sharp while you work</h3>
          <p>Converted your doc? Reward yourself with clean energy:</p>
          <div class="cta-links">
            <a href="https://nutrithrive.com.au/pages/products/product-detail.html">Moringa Focus Powder →</a>
            <a href="https://nutrithrive.com.au/pages/products/product-black-tea.html">Darjeeling Brain Tea →</a>
            <a href="https://nutrithrive.com.au/pages/blog/blog.html">More free wellness tools →</a>
          </div>
          <p style="margin-top:12px;">Want batch converters + future freebies? <a href="#" id="newsletterLink" style="color:var(--accent-dark); font-weight:600;">Join our newsletter</a></p>
        </div>
      </section>
    </div>

    <section class="panel" id="txtPanel">
      <p class="section-title">New · TXT to PDF</p>
      <p style="margin:0;color:var(--muted);">Paste or upload plain text, then download a beautifully formatted PDF.</p>
      <textarea id="txtInput" placeholder="Type or paste your text here..." style="min-height:220px;"></textarea>
      <div class="btn-row">
        <button class="btn outline" id="txtUploadBtn">Upload .txt</button>
        <button class="btn outline" id="txtSampleBtn">Load sample text</button>
        <button class="btn accent" id="txtConvertBtn">Make PDF</button>
      </div>
      <input type="file" id="txtFileInput" accept="text/plain" style="display:none" />
      <div class="status" id="txtStatus">Waiting for your words.</div>
    </section>

    <footer>
      Conversion happens locally using PDF.js. Scanned/image-only PDFs may need OCR before extracting text.
    </footer>
  </div>

  <script>
    const SAMPLE_PDF_BASE64 = `JVBERi0xLjMKJZOMi54gUmVwb3J0TGFiIEdlbmVyYXRlZCBQREYgZG9jdW1lbnQgaHR0cDovL3d3dy5yZXBvcnRsYWIuY29tCjEgMCBvYmoKPDwKL0YxIDIgMCBSCj4+CmVuZG9iagoyIDAgb2JqCjw8Ci9CYXNlRm9udCAvSGVsdmV0aWNhIC9FbmNvZGluZyAvV2luQW5zaUVuY29kaW5nIC9OYW1lIC9GMSAvU3VidHlwZSAvVHlwZTEgL1R5cGUgL0ZvbnQKPj4KZW5kb2JqCjMgMCBvYmoKPDwKL0NvbnRlbnRzIDcgMCBSIC9NZWRpYUJveCBbIDAgMCA2MTIgNzkyIF0gL1BhcmVudCA2IDAgUiAvUmVzb3VyY2VzIDw8Ci9Gb250IDEgMCBSIC9Qcm9jU2V0IFsgL1BERiAvVGV4dCAvSW1hZ2VCIC9JbWFnZUMgL0ltYWdlSSBdCj4+IC9Sb3RhdGUgMCAvVHJhbnMgPDwKCj4+IAogIC9UeXBlIC9QYWdlCj4+CmVuZG9iago0IDAgb2JqCjw8Ci9QYWdlTW9kZSAvVXNlTm9uZSAvUGFnZXMgNiAwIFIgL1R5cGUgL0NhdGFsb2cKPj4KZW5kb2JqCjUgMCBvYmoKPDwKL0F1dGhvciAoYW5vbnltb3VzKSAvQ3JlYXRpb25EYXRlIChEOjIwMjUxMTE3MjIxOTE2KzExJzAwJykgL0NyZWF0b3IgKFJlcG9ydExhYiBQREYgTGlicmFyeSAtIHd3dy5yZXBvcnRsYWIuY29tKSAvS2V5d29yZHMgKCkgL01vZERhdGUgKEQ6MjAyNTExMTcyMjE5MTYrMTEnMDAnKSAvUHJvZHVjZXIgKFJlcG9ydExhYiBQREYgTGlicmFyeSAtIHd3dy5yZXBvcnRsYWIuY29tKSAKICAvU3ViamVjdCAodW5zcGVjaWZpZWQpIC9UaXRsZSAodW50aXRsZWQpIC9UcmFwcGVkIC9GYWxzZQo+PgplbmRvYmoKNiAwIG9iago8PAovQ291bnQgMSAvS2lkcyBbIDMgMCBSIF0gL1R5cGUgL1BhZ2VzCj4+CmVuZG9iago3IDAgb2JqCjw8Ci9GaWx0ZXIgWyAvQVNDSUk4NURlY29kZSAvRmxhdGVEZWNvZGUgXSAvTGVuZ3RoIDI1MAo+PgpzdHJlYW0KR2FyVzM1bXRPYCUjKzBMTVdbXUY5TnNwVC5fOmgkP2olIUhhcWU6JVhlWTdmcmQzczFnZDFMJWFGZWwkI1lbUkFbXGo7NSxgRUI7K1tIcCNCZmxROVlicDovVD0rWUJROVNgKCY5QV5HIT5RSTxDMll1azxdPnRpLl1QUj9eSWo2UillZGE/ckpCZHNBckFVLkVwWEY2aSxmQE1cMWZSRnInXypVTmhKVktKUyxkMmhCb3NbM1k+N2cySmJQMmhuZGxHPyFeTmFbJ29bWjQwKypBS1pZNFpccjZcW2lATygxY0RxMSYtRVM7JHJRWWY3NFRTZE08PEV+PmVuZHN0cmVhbQplbmRvYmoKeHJlZgowIDgKMDAwMDAwMDAwMCA2NTUzNSBmIAowMDAwMDAwMDczIDAwMDAwIG4gCjAwMDAwMDAxMDQgMDAwMDAgbiAKMDAwMDAwMDIxMSAwMDAwMCBuIAowMDAwMDAwNDA0IDAwMDAwIG4gCjAwMDAwMDA0NzIgMDAwMDAgbiAKMDAwMDAwMDc2OCAwMDAwMCBuIAowMDAwMDAwODI3IDAwMDAwIG4gCnRyYWlsZXIKPDwKL0lEIAlgPDhkNWY4MjZhMTQ1NWExNjk4MTViZWNkYzUzODMzNWVhPjw4ZDVmODI2YTE0NTVhMTY5ODE1YmVjZGM1MzgzMzVlYT5dCiUgUmVwb3J0TGFiIGdlbmVyYXRlZCBQREYgZG9jdW1lbnQgLS0gZGlnZXN0IChodHRwOi8vd3d3LnJlcG9ydGxhYi5jb20pCgovSW5mbyA1IDAgUgovUm9vdCA0IDAgUgovU2l6ZSA4Cj4+CnN0YXJ0eHJlZgoxMTY3CiUlRU9G\n`;

    const dropZone = document.getElementById('dropZone');
    const fileInput = document.getElementById('fileInput');
    const convertBtn = document.getElementById('convertBtn');
    const sampleBtn = document.getElementById('sampleBtn');
    const statusText = document.getElementById('statusText');
    const resultsBlock = document.getElementById('resultsBlock');
    const textOutput = document.getElementById('textOutput');
    const downloadBtn = document.getElementById('downloadBtn');
    const copyBtn = document.getElementById('copyBtn');
    const emailBtn = document.getElementById('emailBtn');
    const emailInput = document.getElementById('emailInput');
    const newsletterLink = document.getElementById('newsletterLink');

    let currentFile = null;
    let extractedText = '';

    function setStatus(msg) {
      statusText.textContent = msg;
    }

    function resetResults() {
      resultsBlock.style.display = 'none';
      textOutput.value = '';
      extractedText = '';
    }

    dropZone.addEventListener('click', () => fileInput.click());
    fileInput.addEventListener('change', (e) => {
      if (e.target.files.length) handleFile(e.target.files[0]);
    });

    ['dragenter','dragover'].forEach(evt => dropZone.addEventListener(evt, (e) => {
      e.preventDefault();
      e.stopPropagation();
      dropZone.classList.add('dragover');
    }));

    ['dragleave','drop'].forEach(evt => dropZone.addEventListener(evt, (e) => {
      e.preventDefault();
      e.stopPropagation();
      dropZone.classList.remove('dragover');
    }));

    dropZone.addEventListener('drop', (e) => {
      const file = e.dataTransfer.files[0];
      if (file) handleFile(file);
    });

    function isPdfFile(file) {
      if (!file) return false;
      if (file.type === 'application/pdf') return true;
      if (file.name && /\.pdf$/i.test(file.name)) return true;
      return false;
    }

    function handleFile(file) {
      if (!isPdfFile(file)) {
        setStatus('That file is not a PDF. Choose a .pdf file.');
        convertBtn.disabled = true;
        resetResults();
        return;
      }
      currentFile = file;
      setStatus(`Ready: ${file.name}`);
      convertBtn.disabled = false;
      resetResults();
    }

    function createDemoFile() {
      setStatus('Loading demo PDF…');
      const byteString = atob(SAMPLE_PDF_BASE64.replace(/\s+/g, ''));
      const array = new Uint8Array(byteString.length);
      for (let i = 0; i < byteString.length; i++) {
        array[i] = byteString.charCodeAt(i);
      }
      try {
        return new File([array], 'nutrithrive-demo.pdf', { type: 'application/pdf' });
      } catch (err) {
        const blob = new Blob([array], { type: 'application/pdf' });
        blob.name = 'nutrithrive-demo.pdf';
        blob.lastModified = Date.now();
        return blob;
      }
    }

    sampleBtn.addEventListener('click', () => {
      const demo = createDemoFile();
      handleFile(demo);
    });

    convertBtn.addEventListener('click', async () => {
      if (!currentFile) return;
      convertBtn.disabled = true;
      setStatus('Converting…');
      try {
        const text = (await extractTextFromPdf(currentFile)).trim();
        extractedText = text;
        textOutput.value = text || '[No selectable text was found in this PDF.]';
        resultsBlock.style.display = 'flex';
        setStatus(text ? 'Done! Scroll down to copy or download.' : 'Finished, but this PDF had no selectable text.');
      } catch (err) {
        console.error(err);
        setStatus('Something went wrong. Try another PDF or ensure it is not password-protected.');
        resetResults();
      } finally {
        convertBtn.disabled = !currentFile;
      }
    });

    async function extractTextFromPdf(file) {
      if (!window.pdfjsLib) throw new Error('PDF library not loaded');
      const arrayBuffer = await file.arrayBuffer();
      const pdf = await pdfjsLib.getDocument({ data: arrayBuffer }).promise;
      let text = '';
      for (let pageNum = 1; pageNum <= pdf.numPages; pageNum++) {
        setStatus(`Reading page ${pageNum}/${pdf.numPages}…`);
        const page = await pdf.getPage(pageNum);
        const content = await page.getTextContent();
        const pageText = content.items.map(item => item.str).join(' ');
        text += pageText + '\n\n';
      }
      return text;
    }

    downloadBtn.addEventListener('click', () => {
      if (!extractedText) return alert('Convert a PDF first.');
      const blob = new Blob([extractedText], { type: 'text/plain' });
      const url = URL.createObjectURL(blob);
      const base = currentFile ? currentFile.name.replace(/\.pdf$/i, '') : 'converted';
      const a = document.createElement('a');
      a.href = url;
      a.download = `${base || 'converted'}.txt`;
      document.body.appendChild(a);
      a.click();
      document.body.removeChild(a);
      URL.revokeObjectURL(url);
    });

    copyBtn.addEventListener('click', async () => {
      if (!extractedText) return alert('Convert a PDF first.');
      try {
        await navigator.clipboard.writeText(extractedText);
        copyBtn.textContent = 'Copied!';
        setTimeout(() => copyBtn.textContent = 'Copy text', 1500);
      } catch (err) {
        alert('Clipboard blocked. Please select the text manually.');
      }
    });

    emailBtn.addEventListener('click', () => {
      if (!extractedText) return alert('Convert a PDF first.');
      const email = emailInput.value.trim();
      if (!email) return alert('Enter an email address.');
      const subject = encodeURIComponent('Your converted PDF text');
      const body = encodeURIComponent(extractedText.slice(0, 1500) + '\n\n— Sent with NutriThrive PDF to TXT');
      window.location.href = `mailto:${email}?subject=${subject}&body=${body}`;
    });

    newsletterLink.addEventListener('click', (e) => {
      e.preventDefault();
      alert('Hook this link up to your email platform to capture leads.');
    });

    // --- TXT to PDF ---
    const txtInput = document.getElementById('txtInput');
    const txtUploadBtn = document.getElementById('txtUploadBtn');
    const txtSampleBtn = document.getElementById('txtSampleBtn');
    const txtConvertBtn = document.getElementById('txtConvertBtn');
    const txtFileInput = document.getElementById('txtFileInput');
    const txtStatus = document.getElementById('txtStatus');

    function setTxtStatus(msg) { txtStatus.textContent = msg; }

    txtUploadBtn.addEventListener('click', () => txtFileInput.click());
    txtFileInput.addEventListener('change', (e) => {
      const file = e.target.files[0];
      if (!file) return;
      if (file.type !== 'text/plain') {
        setTxtStatus('Please choose a plain .txt file.');
        return;
      }
      const reader = new FileReader();
      reader.onload = () => {
        txtInput.value = reader.result;
        setTxtStatus(`Loaded ${file.name}`);
      };
      reader.onerror = () => setTxtStatus('Could not read that file.');
      reader.readAsText(file);
    });

    txtSampleBtn.addEventListener('click', () => {
      txtInput.value = [
        'NutriThrive PDF maker demo',
        '',
        '• Use this tool to turn quick notes into ready-to-share PDFs.',
        '• Outline your smoothie recipes, grocery lists, or wellness challenges.',
        '• Add more text, then tap Make PDF!'
      ].join('\n');
      setTxtStatus('Sample text loaded.');
    });

    txtConvertBtn.addEventListener('click', () => {
      const text = txtInput.value.trim();
      if (!text) {
        setTxtStatus('Type or paste some text first.');
        return;
      }
      if (!window.jspdf || !window.jspdf.jsPDF) {
        setTxtStatus('PDF generator missing. Please reload.');
        return;
      }
      txtConvertBtn.disabled = true;
      setTxtStatus('Rendering PDF…');
      try {
        const { jsPDF } = window.jspdf;
        const doc = new jsPDF({ unit: 'pt', format: 'a4' });
        const margin = 48;
        const width = doc.internal.pageSize.getWidth() - margin * 2;
        const lines = doc.splitTextToSize(text, width);
        doc.setFont('Times','Normal');
        doc.setFontSize(12);
        doc.text(lines, margin, margin + 12);
        const filename = 'nutrithrive-notes.pdf';
        doc.save(filename);
        setTxtStatus('PDF downloaded!');
      } catch (err) {
        console.error(err);
        setTxtStatus('Could not create PDF.');
      } finally {
        txtConvertBtn.disabled = false;
      }
    });
  </script>
</body>
</html>
